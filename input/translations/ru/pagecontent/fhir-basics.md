Руководство по внедрению DHP использует терминологию, обозначения и принципы проектирования, специфичные для [стандарта HL7 FHIR R5](https://hl7.org/fhir/R5/). Важно быть знакомым с базовыми принципами FHIR и уметь читать спецификации FHIR. Читателям, которые ранее не работали с FHIR, рекомендуется ознакомиться со следующим объяснением перед чтением остальной части настоящего руководства по внедрению.

### Обзор FHIR

Fast Healthcare Interoperability Resources (FHIR) это спецификация платформы Health Level 7 (HL7), поддерживающая обмен медицинской информацией между системами и приложениями здравоохранения. Медицинские данные должны быть доступны и понятны при перемещении пациентов внутри экосистемы здравоохранения. Для обеспечения этого FHIR определяет набор возможностей, применимых в ходе медицинских процессов, во всех юрисдикциях и в различных контекстах. FHIR универсален, то есть может использоваться в самых разных средах: обмен данными на базе электронной медицинской карты (ЭМК), мобильные приложения, облачные коммуникации. Кроме того, FHIR ориентирован на быстрое и простое внедрение, снижая барьеры входа для новых разработчиков.

### Клиническое применение

FHIR предназначен для стандартизации и обеспечения обмена всей информацией, связанной со здравоохранением. Это касается не только клинических данных, но и административных и исследовательских. FHIR может применяться как в медицине человека, так и в ветеринарии. Он применим во множестве контекстов: стационарная помощь, неотложная помощь, длительный уход, амбулаторная помощь, первичная медико-санитарная помощь и др. Одним из преимуществ HL7 FHIR является независимость от поставщиков ЭМК и медицинских систем. Кроме того, спецификация доступна бесплатно, а также существуют многочисленные открытые примеры, помогающие в разработке новых приложений.

### Ресурсы

Базовые строительные блоки FHIR называются ресурсами, которые в DHP представлены в формате JSON. Ресурс это совокупность информации (элементов данных), предназначенная для обмена или хранения. Например, ресурс `Patient` содержит демографические и административные сведения о пациенте. Другие ресурсы охватывают исследование, управление пациентами, медицинское обслуживание, выставление счетов и клинические отчёты. Главная цель чтобы набор ресурсов покрывал большинство клинических сценариев. Это достигается за счёт объединения ресурсов через ссылки. Пример: связывая ресурс `Patient` с `Observation` (хранит клинические находки), `Condition` (проблема или диагноз) и `Medication` (состав, дозировка, сила лекарства), можно моделировать конкретные сценарии для нужд здравоохранения с [использованием доступных профилей](artifacts.html).

### Профилирование

Профиль определяет использование ресурса в конкретном сценарии. Профилирование это наложение ограничений на так называемые базовые (core) ресурсы. Эти ресурсы создаются рабочими группами специалистов для наиболее распространённых случаев применения. Так как ресурсы универсальны, правила спецификации достаточно общие. Применяя набор ограничений к ресурсу FHIR, его можно адаптировать под конкретный сценарий например, тот, что поддерживается DHP. Комбинируя базовые ресурсы с профилями, определёнными DHP, можно создавать приложения, соответствующие потребностям экосистемы здравоохранения Узбекистана.

### Работа с адресами

UZ Core поддерживает как адреса в Узбекистане, так и международные адреса.

#### Создание адреса в Узбекистане

Для адресов в Узбекистане необходимо использовать кодированные значения из официальных реестров административно-территориальных единиц. Система проверяет соответствие кода района, области и города кодам из системы «Управление цифровым населением» (DPM):

```jsonc
{
  "address": [{
    "use": "home",
    "type": "physical",
    "country": "UZ",
    "state": "1727",            // Код области должен быть из https://terminology.dhp.uz/fhir/core/ValueSet/state-vs (например, 1727 для Ташкентской области)
    "district": "1727220",      // Код района должен быть из https://terminology.dhp.uz/fhir/core/ValueSet/regions-vs (например, 1727220 для Бекабадского района)
    "city": "17150085",         // Код махалли должен быть из https://terminology.dhp.uz/fhir/core/ValueSet/mahalla-vs (собрание граждан)
    "line": ["Amir Temur ko'chasi"],
    "text": "Yangi Sergeli mahallasi, Amir Temur ko'chasi, 15-uy, 42-xonadon"
  }]
}
```

#### Создание международного адреса

Для адресов за пределами Узбекистана административные единицы указываются в свободной текстовой форме, без обязательного использования справочников, что обеспечивает гибкое представление структуры иностранных адресов:

```jsonc
{
  "address": [{
    "use": "home",
    "type": "physical",
    "country": "US",
    "state": "California",             // Свободный текст
    "district": "Los Angeles County",  // Свободный текст
    "city": "Los Angeles",             // Свободный текст
    "line": ["123 Main Street", "Apt 4B"],
    "postalCode": "90001"
  }]
}
```

### Терминология

Для повышения интероперабельности крайне важна стандартизированная терминология. Использование единой терминологии позволяет собирать, документировать и обрабатывать медицинскую информацию в сопоставимых концептах данных. Это обеспечивает обмен и сопоставление клинических знаний в согласованной и международно признанной системе. FHIR не может определить все коды, необходимые в каждой системе здравоохранения, поэтому он предоставляет два ресурса для управления кодами и их значением:

* `CodeSystem` коллекция кодов, определяющая набор значений и их смысл. По сути, это каталог, включающий различные коды и их описания. Пример: SNOMED-CT, LOINC или созданная локальная система.

* `ValueSet` выборка кодов из одного или нескольких `CodeSystem`, используемая в конкретном контексте. `ValueSet` содержит ссылки на фактические коды из определённой `CodeSystem`. Преимущество: при обновлении `CodeSystem` соответствующие `ValueSet` обновляются автоматически.

#### CodeSystems и языковая поддержка
В данном руководстве по внедрению используются два различных подхода к управлению терминологией. Для клинических понятий, специфичных для Узбекистана, мы определяем оригинальные CodeSystems с кодами, созданными на узбекском языке в качестве языка по умолчанию, дополненные обозначениями на русском и английском языках для поддержки многоязычных реализаций. Для стандартизированных терминологий из HL7 Terminology (THO), используемых FHIR, мы предоставляем дополнения CodeSystem, которые добавляют переводы на узбекский и русский языки к существующей англоязычной терминологии. Эти многоязычные обозначения служат исключительно для целей отображения в пользовательских интерфейсах — сами базовые коды остаются языково-независимыми идентификаторами, которые приложения могут обрабатывать согласованно, независимо от языка отображения, выбранного конечными пользователями.

#### ConceptMaps
В FHIR ConceptMaps определяют отношения и сопоставления между кодами из различных терминологических систем, обеспечивая семантическую интероперабельность между разрозненными схемами кодирования. В рамках реализации ЕЦПЗ приложения должны использовать исключительно локально определённые коды для обмена данными и их хранения. Для облегчения интеграции с международными стандартами, ЕЦПЗ предоставляет ресурсы ConceptMap, которые устанавливают сопоставления между распространёнными международными терминологиями (такими как ICD-10, SNOMED CT или LOINC) и соответствующими им локальными узбекскими кодами. Приложения могут использовать операцию $translate ресурса ConceptMap для программного преобразования стандартных международных кодов в требуемые локальные коды, обеспечивая соответствие требованиям ЕЦПЗ и сохраняя совместимость с глобальными стандартами здравоохранения.

### Ссылки

Для дополнительного изучения рекомендуются следующие материалы:

* [Обзор FHIR](http://hl7.org/fhir/r5/summary.html)
* [Введение для разработчиков](http://hl7.org/fhir/r5/overview-dev.html)
* [Типы данных](http://hl7.org/fhir/r5/datatypes.html)
* [Использование кодов](http://hl7.org/fhir/r5/terminologies.html)
* [Ссылки между ресурсами](http://hl7.org/fhir/r5/references.html)
* [Как читать определения ресурса и профиля](http://hl7.org/fhir/r5/formats.html#table)
* [Определения базовых ресурсов](http://hl7.org/fhir/r5/resource.html)

### Связанные руководства FHIR

{% lang-fragment dependency-table.xhtml %}

{% lang-fragment globals-table.xhtml %}
